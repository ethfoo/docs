{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"getting-started/overview/","text":"Loggie\u6f2b\u6e38\u6307\u5357 \u00b6 \u6b22\u8fce\u6765\u5230Loggie\u7684\u4e16\u754c\u3002 \u4e86\u89e3 \u00b6 \u60f3\u77e5\u9053\u4ec0\u4e48\u662fLoggie\uff1f\u4e86\u89e3\u4e00\u4e0b\u300c \u6838\u5fc3\u6982\u5ff5 \u300d\u3002 \u5982\u679c\u4f60\u5e0c\u671b\u5feb\u901f\u4f53\u9a8cLoggie\uff0c\u8bf7\u53c2\u8003\u300c \u5feb\u901f\u4e0a\u624b \u300d\u3002 \u6709\u66f4\u591a\u5174\u8da3\uff1f\u60f3\u77e5\u9053\u6211\u4eec\u4e3a\u4ec0\u4e48\u7814\u53d1Loggie\u3001Loggie\u6709\u4ec0\u4e48\u4f18\u52bf\u3001\u548c\u540c\u7c7b\u9879\u76ee\u7684\u5bf9\u6bd4\uff1f\u8bf7\u6233 \u8fd9\u91cc \u3002 \u4f7f\u7528 \u00b6 \u5982\u679c\u4f60\u5e0c\u671b\u5c1d\u8bd5\u4e00\u4e0bLoggie\uff0c\u4f46\u4e0d\u77e5\u9053\u5982\u4f55\u5f00\u59cb\uff1f \u53ef\u4ee5\u5148\u4ece\u6574\u4f53\u601d\u8003\u4e00\u4e0b\uff1a\u5982\u4f55\u91c7\u96c6\u4e1a\u52a1\u7684\u65e5\u5fd7\uff0c\u5982\u4f55\u5f62\u6210\u4e00\u4e2a\u5b8c\u5584\u5e76\u9002\u5408\u5b9e\u9645\u9700\u6c42\u7684\u65e5\u5fd7\u67b6\u6784\uff1f \u8fd9\u91cc\u6709\u4e00\u4e2a \u53c2\u8003 \u3002 \u63a5\u7740\uff0c\u4f60\u53ef\u4ee5\u9009\u62e9\u9002\u5408\u7684\u4e1a\u52a1\u300c \u573a\u666f \u300d\uff0c\u67e5\u770bLoggie\u5728Kubernetes\u4e0b\u7684\u6700\u4f73\u5b9e\u8df5\u3002 \u8fd9\u91cc\u8fd8\u6d89\u53ca\u5230\u5982\u4f55\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u300c \u90e8\u7f72 \u300dLoggie\u3002 \u53e6\u5916\uff0c\u60f3\u67e5\u770b\u5177\u4f53\u7ec4\u4ef6\u7684\u4f7f\u7528\u65b9\u5f0f\uff0c\u8bf7\u53c2\u8003\u300c \u914d\u7f6e \u300d\u3002 \u89e3\u7b54 \u00b6 \u5728\u4f7f\u7528Loggie\u7684\u65f6\u5019\u9047\u5230\u95ee\u9898\uff1f \u8bf7\u63d0 issues \u6216\u8005\u8054\u7cfb\u6211\u4eec\u3002 \u5fae\u4fe1\u626b\u7801\u52a0\u5165Loggie\u8ba8\u8bba\u7fa4\uff1a \u53c2\u4e0e \u00b6 \u5982\u679c\u4f60\u5bf9Loggie\u7684\u5177\u4f53\u5b9e\u73b0\u611f\u5174\u8da3\uff0c\u60f3\u53c2\u4e0eLoggie\u5f00\u6e90\u7684\u7814\u53d1\uff1f\u60f3\u81ea\u7814\u63d2\u4ef6\uff1f\u8bf7\u770b\u300c \u5f00\u53d1\u624b\u518c \u300d\u3002","title":"Overview"},{"location":"getting-started/overview/#loggie","text":"\u6b22\u8fce\u6765\u5230Loggie\u7684\u4e16\u754c\u3002","title":"Loggie\u6f2b\u6e38\u6307\u5357"},{"location":"getting-started/overview/#_1","text":"\u60f3\u77e5\u9053\u4ec0\u4e48\u662fLoggie\uff1f\u4e86\u89e3\u4e00\u4e0b\u300c \u6838\u5fc3\u6982\u5ff5 \u300d\u3002 \u5982\u679c\u4f60\u5e0c\u671b\u5feb\u901f\u4f53\u9a8cLoggie\uff0c\u8bf7\u53c2\u8003\u300c \u5feb\u901f\u4e0a\u624b \u300d\u3002 \u6709\u66f4\u591a\u5174\u8da3\uff1f\u60f3\u77e5\u9053\u6211\u4eec\u4e3a\u4ec0\u4e48\u7814\u53d1Loggie\u3001Loggie\u6709\u4ec0\u4e48\u4f18\u52bf\u3001\u548c\u540c\u7c7b\u9879\u76ee\u7684\u5bf9\u6bd4\uff1f\u8bf7\u6233 \u8fd9\u91cc \u3002","title":"\u4e86\u89e3"},{"location":"getting-started/overview/#_2","text":"\u5982\u679c\u4f60\u5e0c\u671b\u5c1d\u8bd5\u4e00\u4e0bLoggie\uff0c\u4f46\u4e0d\u77e5\u9053\u5982\u4f55\u5f00\u59cb\uff1f \u53ef\u4ee5\u5148\u4ece\u6574\u4f53\u601d\u8003\u4e00\u4e0b\uff1a\u5982\u4f55\u91c7\u96c6\u4e1a\u52a1\u7684\u65e5\u5fd7\uff0c\u5982\u4f55\u5f62\u6210\u4e00\u4e2a\u5b8c\u5584\u5e76\u9002\u5408\u5b9e\u9645\u9700\u6c42\u7684\u65e5\u5fd7\u67b6\u6784\uff1f \u8fd9\u91cc\u6709\u4e00\u4e2a \u53c2\u8003 \u3002 \u63a5\u7740\uff0c\u4f60\u53ef\u4ee5\u9009\u62e9\u9002\u5408\u7684\u4e1a\u52a1\u300c \u573a\u666f \u300d\uff0c\u67e5\u770bLoggie\u5728Kubernetes\u4e0b\u7684\u6700\u4f73\u5b9e\u8df5\u3002 \u8fd9\u91cc\u8fd8\u6d89\u53ca\u5230\u5982\u4f55\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u300c \u90e8\u7f72 \u300dLoggie\u3002 \u53e6\u5916\uff0c\u60f3\u67e5\u770b\u5177\u4f53\u7ec4\u4ef6\u7684\u4f7f\u7528\u65b9\u5f0f\uff0c\u8bf7\u53c2\u8003\u300c \u914d\u7f6e \u300d\u3002","title":"\u4f7f\u7528"},{"location":"getting-started/overview/#_3","text":"\u5728\u4f7f\u7528Loggie\u7684\u65f6\u5019\u9047\u5230\u95ee\u9898\uff1f \u8bf7\u63d0 issues \u6216\u8005\u8054\u7cfb\u6211\u4eec\u3002 \u5fae\u4fe1\u626b\u7801\u52a0\u5165Loggie\u8ba8\u8bba\u7fa4\uff1a","title":"\u89e3\u7b54"},{"location":"getting-started/overview/#_4","text":"\u5982\u679c\u4f60\u5bf9Loggie\u7684\u5177\u4f53\u5b9e\u73b0\u611f\u5174\u8da3\uff0c\u60f3\u53c2\u4e0eLoggie\u5f00\u6e90\u7684\u7814\u53d1\uff1f\u60f3\u81ea\u7814\u63d2\u4ef6\uff1f\u8bf7\u770b\u300c \u5f00\u53d1\u624b\u518c \u300d\u3002","title":"\u53c2\u4e0e"},{"location":"getting-started/install/kubernetes/","text":"Kubernetes\u90e8\u7f72 \u00b6 \u90e8\u7f72Loggie DaemonSet \u00b6 \u8bf7\u786e\u4fdd\u672c\u5730\u6709kubectl\u548chelm\u53ef\u6267\u884c\u547d\u4ee4\u3002 kubectl\uff08 \u4e0b\u8f7d \uff09 helm\uff08 \u4e0b\u8f7d \uff09 \u4e0b\u8f7dhelm-chart\u5305 \u00b6 helm pull https://github.com/loggie-io/installation/releases/download/v1.2.0/loggie-v1.2.0.tgz && tar xvzf loggie-v1.2.0.tgz \u4fee\u6539\u914d\u7f6e \u00b6 \u8fdb\u5165chart\u76ee\u5f55\uff1a cd installation/helm-chart \u67e5\u770bvalues.yml\uff0c\u5e76\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u8fdb\u884c\u4fee\u6539\u3002 \u76ee\u524d\u53ef\u914d\u7f6e\u7684\u53c2\u6570\u5982\u4e0b\u6240\u793a\uff1a \u955c\u50cf \u00b6 image : hub.c.163.com/loggie/loggie:v1.2.0 loggie\u7684\u955c\u50cf\u3002 \u8d44\u6e90 \u00b6 resources : limits : cpu : 2 memory : 2Gi requests : cpu : 100m memory : 100Mi Loggie Agent\u7684limit/request\u8d44\u6e90\uff0c\u53ef\u4ee5\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u4fee\u6539\u3002 \u989d\u5916\u542f\u52a8\u53c2\u6570 \u00b6 extraArgs : {} Loggie\u7684\u989d\u5916\u542f\u52a8\u53c2\u6570\uff0c\u6bd4\u5982\u5e0c\u671b\u4fee\u6539\u914d\u7f6e\u4f7f\u7528debug\u7684\u65e5\u5fd7\u7ea7\u522b\uff0c\u4e0d\u4f7f\u7528json\u683c\u5f0f\u7684\u65e5\u5fd7\u6253\u5370\u5f62\u5f0f\uff0c\u53ef\u4ee5\u4fee\u6539\u4e3a: extraArgs : log.level : debug log.jsonFormat : false \u989d\u5916\u6302\u8f7d \u00b6 extraVolumeMounts : - mountPath : /var/log/pods name : podlogs - mountPath : /var/lib/kubelet/pods name : kubelet - mountPath : /var/lib/docker name : docker extraVolumes : - hostPath : path : /var/log/pods type : DirectoryOrCreate name : podlogs - hostPath : path : /var/lib/kubelet/pods type : DirectoryOrCreate name : kubelet - hostPath : path : /var/lib/docker type : DirectoryOrCreate name : docker \u5efa\u8bae\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u9ed8\u8ba4\u6302\u8f7d\u4ee5\u4e0a\u76ee\u5f55\u3002 Loggie\u9700\u8981\u8bb0\u5f55\u91c7\u96c6\u7684\u6587\u4ef6\u72b6\u6001(offset\u7b49)\uff0c\u907f\u514d\u91cd\u542f\u540e\u4ece\u5934\u5f00\u59cb\u91c7\u96c6\u6587\u4ef6\uff0c\u9020\u6210\u65e5\u5fd7\u91c7\u96c6\u91cd\u590d\uff0c\u9ed8\u8ba4\u6302\u8f7d\u8def\u5f84\u4e3a/data/loggie.db\uff0c\u6240\u4ee5\u6302\u8f7d\u4e86 /data/loggie--{{ template \"loggie.name\" . }} \u76ee\u5f55\u3002 \u5982\u679c\u4e1a\u52a1Pod\u4f7f\u7528hostPath\u6302\u8f7d\u65e5\u5fd7\u5230\u8282\u70b9\uff0c\u9700\u8981Loggie\u6302\u8f7d\u76f8\u540c\u7684\u8def\u5f84\u3002 \u56e0\u4e3aLoggie\u9700\u8981\u91c7\u96c6\u5bb9\u5668\u6807\u51c6\u8f93\u51fa\u7684\u8def\u5f84\uff0c\u6240\u4ee5\u9700\u8981\u4ece\u8282\u70b9/var/lib/docker\u6216\u8005/var/log/pods\u4e0b\u91c7\u96c6\u65e5\u5fd7\uff0c\u5982\u679c\u73af\u5883\u4e2d\u90e8\u7f72\u7684docker\u4fee\u6539\u4e86\u8be5\u8def\u5f84\uff0c\u8bf7\u540c\u6b65\u4fee\u6539\u8be5\u6302\u8f7d\u8def\u5f84\u3002\u5982\u679c\u975edocker\u8fd0\u884c\u65f6\uff0c\u6bd4\u5982\u4f7f\u7528containerd\uff0c\u65e0\u9700\u6302\u8f7d/var/lib/docker\uff0cLoggie\u4f1a\u4ece/var/log/pods\u4e2d\u5bfb\u627e\u5b9e\u9645\u7684\u6807\u51c6\u8f93\u51fa\u8def\u5f84\u3002 \u5982\u679c\u4e1a\u52a1Pod\u4f7f\u7528emtpyDir\u6302\u8f7d\u65e5\u5fd7\u5230\u8282\u70b9\uff0c\u9ed8\u8ba4emtpyDir\u4f1a\u5728\u8282\u70b9\u7684/var/lib/kubelet/pods\u8def\u5f84\u4e0b\uff0c\u6240\u4ee5\u9700\u8981Loggie\u6302\u8f7d\u8be5\u8def\u5f84\u3002\u5982\u679c\u73af\u5883\u7684kubelet\u4fee\u6539\u4e86\u8be5\u8def\u5f84\u914d\u7f6e\uff0c\u8fd9\u91cc\u9700\u8981\u540c\u6b65\u4fee\u6539\u3002 \u8c03\u5ea6 \u00b6 nodeSelector : {} affinity : {} # podAntiAffinity: # requiredDuringSchedulingIgnoredDuringExecution: # - labelSelector: # matchExpressions: # - key: app # operator: In # values: # - loggie # topologyKey: \"kubernetes.io/hostname\" \u53ef\u4f7f\u7528nodeSelector\u548caffinity\u6765\u63a7\u5236Loggie Pod\u7684\u8c03\u5ea6\uff0c\u5177\u4f53\u8bf7\u53c2\u8003Kubernetes\u6587\u6863\u3002 tolerations : [] # - effect: NoExecute # operator: Exists # - effect: NoSchedule # operator: Exists \u5982\u679c\u8282\u70b9\u6709\u81ea\u5df1\u7684taints\uff0c\u4f1a\u5bfc\u81f4Loggie Pod\u65e0\u6cd5\u8c03\u5ea6\u5230\u8be5\u8282\u70b9\uff0c\u5982\u679c\u9700\u8981\u5ffd\u7565taints\uff0c\u53ef\u4ee5\u52a0\u4e0a\u5bf9\u5e94\u7684tolerations\u3002 \u66f4\u65b0\u7b56\u7565 \u00b6 updateStrategy : type : RollingUpdate \u53ef\u4e3a RollingUpdate \u6216\u8005 OnDelete \u3002 \u5168\u5c40\u914d\u7f6e \u00b6 config : loggie : reload : enabled : true period : 10s monitor : logger : period : 30s enabled : true listeners : filesource : ~ filewatcher : ~ reload : ~ sink : ~ discovery : enabled : true kubernetes : containerRuntime : containerd fields : container.name : containername logConfig : logconfig namespace : namespace node.name : nodename pod.name : podname http : enabled : true port : 9196 \u5177\u4f53\u53c2\u6570\u8bf4\u660e\u53ef\u53c2\u8003 \u7ec4\u4ef6\u914d\u7f6e \u3002 \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5982\u679c\u4f60\u5728\u672c\u5730\u4f7f\u7528Kind\u7b49\u5de5\u5177\u90e8\u7f72Kubernetes\uff0cKind\u9ed8\u8ba4\u4f1a\u4f7f\u7528containerd runtime\uff0c\u6b64\u65f6\u9700\u8981\u5728discovery.kubernetes\u4e2d\u589e\u52a0 containerRuntime: containerd \uff0c\u6307\u5b9a\u5bb9\u5668\u8fd0\u884c\u65f6\u3002 service \u00b6 \u5982\u679cLoggie\u5e0c\u671b\u63a5\u6536\u5176\u4ed6\u670d\u52a1\u53d1\u9001\u7684\u6570\u636e\uff0c\u9700\u8981\u5c06\u81ea\u8eab\u7684\u670d\u52a1\u901a\u8fc7service\u66b4\u9732\u51fa\u6765\u3002 \u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u4f7f\u7528Agent\u6a21\u5f0f\u7684Loggie\u53ea\u9700\u8981\u66b4\u9732\u81ea\u8eab\u7ba1\u7406\u7aef\u53e3\u3002 servicePorts : - name : monitor port : 9196 targetPort : 9196 \u90e8\u7f72 \u00b6 \u521d\u6b21\u90e8\u7f72\uff0c\u6211\u4eec\u6307\u5b9a\u90e8\u7f72\u5728 loggie namespace\u4e0b\uff0c\u5e76\u8ba9helm\u81ea\u52a8\u521b\u5efa\u8be5namespace\u3002 helm install loggie ./ -nloggie --create-namespace \u5982\u679c\u4f60\u7684\u73af\u5883\u4e2d\u5df2\u7ecf\u521b\u5efa\u4e86 loggie namespace\uff0c\u53ef\u4ee5\u5ffd\u7565\u5176\u4e2d\u7684 -nloggie \u548c --create-namespace \u53c2\u6570\u3002\u5f53\u7136\uff0c\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528\u81ea\u5df1\u7684namespace\uff0c\u5c06\u5176\u4e2d loggie \u66ff\u6362\u5373\u53ef\u3002 Kubernetes\u7248\u672c\u95ee\u9898 failed to install CRD crds/crds.yaml: unable to recognize \"\": no matches for kind \"CustomResourceDefinition\" in version \"apiextensions.k8s.io/v1\" \u5982\u679c\u4f60\u5728helm install\u7684\u65f6\u5019\u51fa\u73b0\u7c7b\u4f3c\u7684\u95ee\u9898\uff0c\u8bf4\u660e\u4f60\u7684Kubernetes\u7248\u672c\u8f83\u4f4e\uff0c\u4e0d\u652f\u6301apiextensions.k8s.io/v1\u7248\u672cCRD\u3002Loggie\u6682\u65f6\u4fdd\u7559\u4e86v1beta1\u7248\u672c\u7684CRD\uff0c\u8bf7\u5220\u9664charts\u4e2dv1beta1\u7248\u672c\uff0c rm loggie/crds/crds.yaml \uff0c\u91cd\u65b0install\u3002 \u67e5\u770b\u90e8\u7f72\u72b6\u6001 \u00b6 \u6267\u884c\u5b8c\u540e\uff0c\u901a\u8fc7\u4f7f\u7528helm\u547d\u4ee4\u6765\u67e5\u770b\u90e8\u7f72\u72b6\u6001\uff1a helm list -nloggie \u7c7b\u4f3c\u5982\u4e0b\u6240\u793a\uff1a NAME NAMESPACE REVISION UPDATED STATUS CHART APP VERSION loggie loggie 1 2021-11-30 18:06:16.976334232 +0800 CST deployed loggie-v0.1.0 v0.1.0 \u540c\u65f6\u4e5f\u53ef\u4ee5\u901a\u8fc7kubectl\u547d\u4ee4\u67e5\u770bPod\u662f\u5426\u5df2\u7ecf\u88ab\u521b\u5efa\u3002 kubectl -nloggie get po \u7c7b\u4f3c\u5982\u4e0b\u6240\u793a\uff1a loggie-sxxwh 1/1 Running 0 5m21s 10.244.0.5 kind-control-plane <none> <none> \u90e8\u7f72Loggie Aggregator \u00b6 \u90e8\u7f72Aggregator\u57fa\u672c\u548cAgent\u4e00\u81f4\uff0c\u5728helm chart\u4e2d\u6211\u4eec\u63d0\u4f9b\u4e86\u9ed8\u8ba4\u6ce8\u91ca\u6389\u7684 Aggregator global config \u90e8\u5206\uff0c\u53ea\u9700\u4f7f\u7528\u8be5\u914d\u7f6e\u540c\u65f6\u53bb\u6389Agent\u7684\u914d\u7f6e\u5373\u53ef\u3002 \u540c\u65f6\uff0c\u8bf7\u6ce8\u610f\u5728values.yaml\u4e2d\u6839\u636e\u60c5\u51b5\u589e\u52a0\uff1a nodeSelector\u6216\u8005affinity\uff0c\u6839\u636enode\u662f\u5426\u6709\u6c61\u70b9\u589e\u52a0tolerations\u3002\u4f7f\u5f97Aggregator DaemonSet\u53ea\u8c03\u5ea6\u5728\u67d0\u51e0\u4e2a\u8282\u70b9\u4e0a service\u589e\u52a0\u63a5\u6536\u7684\u7aef\u53e3\uff0c\u6bd4\u5982\u4f7f\u7528Grpc source\uff0c\u9700\u8981\u586b\u5199\u9ed8\u8ba4\u76846066\u7aef\u53e3\uff1a servicePorts : - name : grpc port : 6066 targetPort : 6066 discovery.kubernetes\u4e2d\u589e\u52a0cluster\u5b57\u6bb5\uff0c\u8868\u793a\u4e2d\u8f6c\u673a\u96c6\u7fa4\u540d\u79f0\uff0c\u7528\u4e8e\u533a\u522bAgent\u6216\u8005\u5176\u4ed6\u7684Loggie\u96c6\u7fa4\uff0c\u5982\u4e0b\u6240\u793a\uff1a config : loggie : discovery : enabled : true kubernetes : cluster : aggregator \u6267\u884c\u90e8\u7f72\u547d\u4ee4\u53c2\u8003\uff1a helm install loggie-aggregator ./ -nloggie-aggregator --create-namespace Note Loggie\u4e2d\u8f6c\u673a\u540c\u6837\u53ef\u4ee5\u4f7f\u7528Deployment\u6216\u8005StatefulSet\u6765\u90e8\u7f72\uff0c\u8bf7\u53c2\u8003DaemonSet\u81ea\u884c\u4fee\u6539helm chart\u3002","title":"Kubernetes\u90e8\u7f72"},{"location":"getting-started/install/kubernetes/#kubernetes","text":"","title":"Kubernetes\u90e8\u7f72"},{"location":"getting-started/install/kubernetes/#loggie-daemonset","text":"\u8bf7\u786e\u4fdd\u672c\u5730\u6709kubectl\u548chelm\u53ef\u6267\u884c\u547d\u4ee4\u3002 kubectl\uff08 \u4e0b\u8f7d \uff09 helm\uff08 \u4e0b\u8f7d \uff09","title":"\u90e8\u7f72Loggie DaemonSet"},{"location":"getting-started/install/kubernetes/#helm-chart","text":"helm pull https://github.com/loggie-io/installation/releases/download/v1.2.0/loggie-v1.2.0.tgz && tar xvzf loggie-v1.2.0.tgz","title":"\u4e0b\u8f7dhelm-chart\u5305"},{"location":"getting-started/install/kubernetes/#_1","text":"\u8fdb\u5165chart\u76ee\u5f55\uff1a cd installation/helm-chart \u67e5\u770bvalues.yml\uff0c\u5e76\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u8fdb\u884c\u4fee\u6539\u3002 \u76ee\u524d\u53ef\u914d\u7f6e\u7684\u53c2\u6570\u5982\u4e0b\u6240\u793a\uff1a","title":"\u4fee\u6539\u914d\u7f6e"},{"location":"getting-started/install/kubernetes/#_2","text":"image : hub.c.163.com/loggie/loggie:v1.2.0 loggie\u7684\u955c\u50cf\u3002","title":"\u955c\u50cf"},{"location":"getting-started/install/kubernetes/#_3","text":"resources : limits : cpu : 2 memory : 2Gi requests : cpu : 100m memory : 100Mi Loggie Agent\u7684limit/request\u8d44\u6e90\uff0c\u53ef\u4ee5\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u4fee\u6539\u3002","title":"\u8d44\u6e90"},{"location":"getting-started/install/kubernetes/#_4","text":"extraArgs : {} Loggie\u7684\u989d\u5916\u542f\u52a8\u53c2\u6570\uff0c\u6bd4\u5982\u5e0c\u671b\u4fee\u6539\u914d\u7f6e\u4f7f\u7528debug\u7684\u65e5\u5fd7\u7ea7\u522b\uff0c\u4e0d\u4f7f\u7528json\u683c\u5f0f\u7684\u65e5\u5fd7\u6253\u5370\u5f62\u5f0f\uff0c\u53ef\u4ee5\u4fee\u6539\u4e3a: extraArgs : log.level : debug log.jsonFormat : false","title":"\u989d\u5916\u542f\u52a8\u53c2\u6570"},{"location":"getting-started/install/kubernetes/#_5","text":"extraVolumeMounts : - mountPath : /var/log/pods name : podlogs - mountPath : /var/lib/kubelet/pods name : kubelet - mountPath : /var/lib/docker name : docker extraVolumes : - hostPath : path : /var/log/pods type : DirectoryOrCreate name : podlogs - hostPath : path : /var/lib/kubelet/pods type : DirectoryOrCreate name : kubelet - hostPath : path : /var/lib/docker type : DirectoryOrCreate name : docker \u5efa\u8bae\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u9ed8\u8ba4\u6302\u8f7d\u4ee5\u4e0a\u76ee\u5f55\u3002 Loggie\u9700\u8981\u8bb0\u5f55\u91c7\u96c6\u7684\u6587\u4ef6\u72b6\u6001(offset\u7b49)\uff0c\u907f\u514d\u91cd\u542f\u540e\u4ece\u5934\u5f00\u59cb\u91c7\u96c6\u6587\u4ef6\uff0c\u9020\u6210\u65e5\u5fd7\u91c7\u96c6\u91cd\u590d\uff0c\u9ed8\u8ba4\u6302\u8f7d\u8def\u5f84\u4e3a/data/loggie.db\uff0c\u6240\u4ee5\u6302\u8f7d\u4e86 /data/loggie--{{ template \"loggie.name\" . }} \u76ee\u5f55\u3002 \u5982\u679c\u4e1a\u52a1Pod\u4f7f\u7528hostPath\u6302\u8f7d\u65e5\u5fd7\u5230\u8282\u70b9\uff0c\u9700\u8981Loggie\u6302\u8f7d\u76f8\u540c\u7684\u8def\u5f84\u3002 \u56e0\u4e3aLoggie\u9700\u8981\u91c7\u96c6\u5bb9\u5668\u6807\u51c6\u8f93\u51fa\u7684\u8def\u5f84\uff0c\u6240\u4ee5\u9700\u8981\u4ece\u8282\u70b9/var/lib/docker\u6216\u8005/var/log/pods\u4e0b\u91c7\u96c6\u65e5\u5fd7\uff0c\u5982\u679c\u73af\u5883\u4e2d\u90e8\u7f72\u7684docker\u4fee\u6539\u4e86\u8be5\u8def\u5f84\uff0c\u8bf7\u540c\u6b65\u4fee\u6539\u8be5\u6302\u8f7d\u8def\u5f84\u3002\u5982\u679c\u975edocker\u8fd0\u884c\u65f6\uff0c\u6bd4\u5982\u4f7f\u7528containerd\uff0c\u65e0\u9700\u6302\u8f7d/var/lib/docker\uff0cLoggie\u4f1a\u4ece/var/log/pods\u4e2d\u5bfb\u627e\u5b9e\u9645\u7684\u6807\u51c6\u8f93\u51fa\u8def\u5f84\u3002 \u5982\u679c\u4e1a\u52a1Pod\u4f7f\u7528emtpyDir\u6302\u8f7d\u65e5\u5fd7\u5230\u8282\u70b9\uff0c\u9ed8\u8ba4emtpyDir\u4f1a\u5728\u8282\u70b9\u7684/var/lib/kubelet/pods\u8def\u5f84\u4e0b\uff0c\u6240\u4ee5\u9700\u8981Loggie\u6302\u8f7d\u8be5\u8def\u5f84\u3002\u5982\u679c\u73af\u5883\u7684kubelet\u4fee\u6539\u4e86\u8be5\u8def\u5f84\u914d\u7f6e\uff0c\u8fd9\u91cc\u9700\u8981\u540c\u6b65\u4fee\u6539\u3002","title":"\u989d\u5916\u6302\u8f7d"},{"location":"getting-started/install/kubernetes/#_6","text":"nodeSelector : {} affinity : {} # podAntiAffinity: # requiredDuringSchedulingIgnoredDuringExecution: # - labelSelector: # matchExpressions: # - key: app # operator: In # values: # - loggie # topologyKey: \"kubernetes.io/hostname\" \u53ef\u4f7f\u7528nodeSelector\u548caffinity\u6765\u63a7\u5236Loggie Pod\u7684\u8c03\u5ea6\uff0c\u5177\u4f53\u8bf7\u53c2\u8003Kubernetes\u6587\u6863\u3002 tolerations : [] # - effect: NoExecute # operator: Exists # - effect: NoSchedule # operator: Exists \u5982\u679c\u8282\u70b9\u6709\u81ea\u5df1\u7684taints\uff0c\u4f1a\u5bfc\u81f4Loggie Pod\u65e0\u6cd5\u8c03\u5ea6\u5230\u8be5\u8282\u70b9\uff0c\u5982\u679c\u9700\u8981\u5ffd\u7565taints\uff0c\u53ef\u4ee5\u52a0\u4e0a\u5bf9\u5e94\u7684tolerations\u3002","title":"\u8c03\u5ea6"},{"location":"getting-started/install/kubernetes/#_7","text":"updateStrategy : type : RollingUpdate \u53ef\u4e3a RollingUpdate \u6216\u8005 OnDelete \u3002","title":"\u66f4\u65b0\u7b56\u7565"},{"location":"getting-started/install/kubernetes/#_8","text":"config : loggie : reload : enabled : true period : 10s monitor : logger : period : 30s enabled : true listeners : filesource : ~ filewatcher : ~ reload : ~ sink : ~ discovery : enabled : true kubernetes : containerRuntime : containerd fields : container.name : containername logConfig : logconfig namespace : namespace node.name : nodename pod.name : podname http : enabled : true port : 9196 \u5177\u4f53\u53c2\u6570\u8bf4\u660e\u53ef\u53c2\u8003 \u7ec4\u4ef6\u914d\u7f6e \u3002 \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5982\u679c\u4f60\u5728\u672c\u5730\u4f7f\u7528Kind\u7b49\u5de5\u5177\u90e8\u7f72Kubernetes\uff0cKind\u9ed8\u8ba4\u4f1a\u4f7f\u7528containerd runtime\uff0c\u6b64\u65f6\u9700\u8981\u5728discovery.kubernetes\u4e2d\u589e\u52a0 containerRuntime: containerd \uff0c\u6307\u5b9a\u5bb9\u5668\u8fd0\u884c\u65f6\u3002","title":"\u5168\u5c40\u914d\u7f6e"},{"location":"getting-started/install/kubernetes/#service","text":"\u5982\u679cLoggie\u5e0c\u671b\u63a5\u6536\u5176\u4ed6\u670d\u52a1\u53d1\u9001\u7684\u6570\u636e\uff0c\u9700\u8981\u5c06\u81ea\u8eab\u7684\u670d\u52a1\u901a\u8fc7service\u66b4\u9732\u51fa\u6765\u3002 \u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u4f7f\u7528Agent\u6a21\u5f0f\u7684Loggie\u53ea\u9700\u8981\u66b4\u9732\u81ea\u8eab\u7ba1\u7406\u7aef\u53e3\u3002 servicePorts : - name : monitor port : 9196 targetPort : 9196","title":"service"},{"location":"getting-started/install/kubernetes/#_9","text":"\u521d\u6b21\u90e8\u7f72\uff0c\u6211\u4eec\u6307\u5b9a\u90e8\u7f72\u5728 loggie namespace\u4e0b\uff0c\u5e76\u8ba9helm\u81ea\u52a8\u521b\u5efa\u8be5namespace\u3002 helm install loggie ./ -nloggie --create-namespace \u5982\u679c\u4f60\u7684\u73af\u5883\u4e2d\u5df2\u7ecf\u521b\u5efa\u4e86 loggie namespace\uff0c\u53ef\u4ee5\u5ffd\u7565\u5176\u4e2d\u7684 -nloggie \u548c --create-namespace \u53c2\u6570\u3002\u5f53\u7136\uff0c\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528\u81ea\u5df1\u7684namespace\uff0c\u5c06\u5176\u4e2d loggie \u66ff\u6362\u5373\u53ef\u3002 Kubernetes\u7248\u672c\u95ee\u9898 failed to install CRD crds/crds.yaml: unable to recognize \"\": no matches for kind \"CustomResourceDefinition\" in version \"apiextensions.k8s.io/v1\" \u5982\u679c\u4f60\u5728helm install\u7684\u65f6\u5019\u51fa\u73b0\u7c7b\u4f3c\u7684\u95ee\u9898\uff0c\u8bf4\u660e\u4f60\u7684Kubernetes\u7248\u672c\u8f83\u4f4e\uff0c\u4e0d\u652f\u6301apiextensions.k8s.io/v1\u7248\u672cCRD\u3002Loggie\u6682\u65f6\u4fdd\u7559\u4e86v1beta1\u7248\u672c\u7684CRD\uff0c\u8bf7\u5220\u9664charts\u4e2dv1beta1\u7248\u672c\uff0c rm loggie/crds/crds.yaml \uff0c\u91cd\u65b0install\u3002","title":"\u90e8\u7f72"},{"location":"getting-started/install/kubernetes/#_10","text":"\u6267\u884c\u5b8c\u540e\uff0c\u901a\u8fc7\u4f7f\u7528helm\u547d\u4ee4\u6765\u67e5\u770b\u90e8\u7f72\u72b6\u6001\uff1a helm list -nloggie \u7c7b\u4f3c\u5982\u4e0b\u6240\u793a\uff1a NAME NAMESPACE REVISION UPDATED STATUS CHART APP VERSION loggie loggie 1 2021-11-30 18:06:16.976334232 +0800 CST deployed loggie-v0.1.0 v0.1.0 \u540c\u65f6\u4e5f\u53ef\u4ee5\u901a\u8fc7kubectl\u547d\u4ee4\u67e5\u770bPod\u662f\u5426\u5df2\u7ecf\u88ab\u521b\u5efa\u3002 kubectl -nloggie get po \u7c7b\u4f3c\u5982\u4e0b\u6240\u793a\uff1a loggie-sxxwh 1/1 Running 0 5m21s 10.244.0.5 kind-control-plane <none> <none>","title":"\u67e5\u770b\u90e8\u7f72\u72b6\u6001"},{"location":"getting-started/install/kubernetes/#loggie-aggregator","text":"\u90e8\u7f72Aggregator\u57fa\u672c\u548cAgent\u4e00\u81f4\uff0c\u5728helm chart\u4e2d\u6211\u4eec\u63d0\u4f9b\u4e86\u9ed8\u8ba4\u6ce8\u91ca\u6389\u7684 Aggregator global config \u90e8\u5206\uff0c\u53ea\u9700\u4f7f\u7528\u8be5\u914d\u7f6e\u540c\u65f6\u53bb\u6389Agent\u7684\u914d\u7f6e\u5373\u53ef\u3002 \u540c\u65f6\uff0c\u8bf7\u6ce8\u610f\u5728values.yaml\u4e2d\u6839\u636e\u60c5\u51b5\u589e\u52a0\uff1a nodeSelector\u6216\u8005affinity\uff0c\u6839\u636enode\u662f\u5426\u6709\u6c61\u70b9\u589e\u52a0tolerations\u3002\u4f7f\u5f97Aggregator DaemonSet\u53ea\u8c03\u5ea6\u5728\u67d0\u51e0\u4e2a\u8282\u70b9\u4e0a service\u589e\u52a0\u63a5\u6536\u7684\u7aef\u53e3\uff0c\u6bd4\u5982\u4f7f\u7528Grpc source\uff0c\u9700\u8981\u586b\u5199\u9ed8\u8ba4\u76846066\u7aef\u53e3\uff1a servicePorts : - name : grpc port : 6066 targetPort : 6066 discovery.kubernetes\u4e2d\u589e\u52a0cluster\u5b57\u6bb5\uff0c\u8868\u793a\u4e2d\u8f6c\u673a\u96c6\u7fa4\u540d\u79f0\uff0c\u7528\u4e8e\u533a\u522bAgent\u6216\u8005\u5176\u4ed6\u7684Loggie\u96c6\u7fa4\uff0c\u5982\u4e0b\u6240\u793a\uff1a config : loggie : discovery : enabled : true kubernetes : cluster : aggregator \u6267\u884c\u90e8\u7f72\u547d\u4ee4\u53c2\u8003\uff1a helm install loggie-aggregator ./ -nloggie-aggregator --create-namespace Note Loggie\u4e2d\u8f6c\u673a\u540c\u6837\u53ef\u4ee5\u4f7f\u7528Deployment\u6216\u8005StatefulSet\u6765\u90e8\u7f72\uff0c\u8bf7\u53c2\u8003DaemonSet\u81ea\u884c\u4fee\u6539helm chart\u3002","title":"\u90e8\u7f72Loggie Aggregator"},{"location":"getting-started/install/node/","text":"\u4e3b\u673a\u90e8\u7f72 \u00b6 Loggie\u4f7f\u7528Golang\u7f16\u8bd1\u6210\u4e8c\u8fdb\u5236\uff0c\u53ef\u6839\u636e\u81ea\u8eab\u9700\u6c42\u5bf9\u63a5\u5404\u7c7b\u90e8\u7f72\u7cfb\u7edf\u3002 \u8fd9\u91cc\u6211\u4eec\u63d0\u4f9b\u4e00\u4e2a\u4f7f\u7528systemd\u90e8\u7f72Loggie\u7684\u53c2\u8003\u3002 \u524d\u7f6e\u68c0\u67e5 \u00b6 \u64cd\u4f5c\u7cfb\u7edf\uff1aLinux \u7cfb\u7edf\u67b6\u6784\uff1aamd64 \u53d1\u884c\u7248\u652f\u6301systemd \u76ee\u524drelease\u4ec5\u5305\u542bGOOS=linux GOARCH=amd64\u751f\u6210\u7684\u4e8c\u8fdb\u5236\u53ef\u6267\u884c\u6587\u4ef6\u3002\u5176\u4ed6\u7cfb\u7edf\u548c\u67b6\u6784\uff0c\u8bf7\u81ea\u884c\u57fa\u4e8e\u6e90\u7801\u4ea4\u53c9\u7f16\u8bd1\u3002 \u4e0b\u8f7d\u4e8c\u8fdb\u5236 \u00b6 mkdir /opt/loggie && curl https://github.com/loggie-io/installation/releases/download/v1.2.0/loggie-linux-amd64 -o /opt/loggie/loggie && chmod +x /opt/loggie/loggie \u6dfb\u52a0\u914d\u7f6e\u6587\u4ef6 \u00b6 \u8bf7\u6839\u636e\u5b9e\u9645\u9700\u6c42\u521b\u5efa\u914d\u7f6e\uff0c\u4ee5\u4e0b\u4e3a\u53c2\u8003\uff1a \u521b\u5efaloggie.yml \u00b6 loggie.yml cat << EOF > /opt/loggie/loggie.yml loggie : monitor : logger : period : 30s enabled : true listeners : filesource : ~ filewatcher : ~ reload : ~ sink : ~ reload : enabled : true period : 10s http : enabled : true port : 9196 EOF \u521b\u5efapipelines.yml \u00b6 pipelines.yml cat << EOF > /opt/loggie/pipelines.yml pipelines : - name : local sources : - type : file name : demo paths : - /tmp/log/*.log sink : type : dev printEvents : true codec : pretty : true EOF \u6dfb\u52a0systemd\u914d\u7f6e \u00b6 cat << EOF > /lib/systemd/system/loggie.service [Unit] Description=Loggie Documentation=https://loggie-io.github.io/docs/getting-started/install/node/ [Service] MemoryMax=200M ExecStart=/opt/loggie/loggie -config.system=/opt/loggie/loggie.yml -config.pipeline=/opt/loggie/pipelines.yml Restart=always [Install] WantedBy=multi-user.target EOF \u542f\u52a8 \u00b6 \u9996\u5148\u751f\u6548\u914d\u7f6e\uff1a systemctl daemon-reload \u7136\u540e\u8bbe\u7f6e\u4e3a\u5f00\u673a\u542f\u52a8\uff1a systemctl enable loggie \u63a5\u7740\u5c31\u53ef\u4ee5\u6b63\u5f0f\u542f\u52a8Loggie\u4e86\uff1a systemctl start loggie \u542f\u52a8\u540e\uff0c\u4f60\u53ef\u4ee5\u968f\u65f6\u67e5\u770b\u8fdb\u7a0b\u72b6\u6001\uff1a systemctl status loggie","title":"\u4e3b\u673a\u90e8\u7f72"},{"location":"getting-started/install/node/#_1","text":"Loggie\u4f7f\u7528Golang\u7f16\u8bd1\u6210\u4e8c\u8fdb\u5236\uff0c\u53ef\u6839\u636e\u81ea\u8eab\u9700\u6c42\u5bf9\u63a5\u5404\u7c7b\u90e8\u7f72\u7cfb\u7edf\u3002 \u8fd9\u91cc\u6211\u4eec\u63d0\u4f9b\u4e00\u4e2a\u4f7f\u7528systemd\u90e8\u7f72Loggie\u7684\u53c2\u8003\u3002","title":"\u4e3b\u673a\u90e8\u7f72"},{"location":"getting-started/install/node/#_2","text":"\u64cd\u4f5c\u7cfb\u7edf\uff1aLinux \u7cfb\u7edf\u67b6\u6784\uff1aamd64 \u53d1\u884c\u7248\u652f\u6301systemd \u76ee\u524drelease\u4ec5\u5305\u542bGOOS=linux GOARCH=amd64\u751f\u6210\u7684\u4e8c\u8fdb\u5236\u53ef\u6267\u884c\u6587\u4ef6\u3002\u5176\u4ed6\u7cfb\u7edf\u548c\u67b6\u6784\uff0c\u8bf7\u81ea\u884c\u57fa\u4e8e\u6e90\u7801\u4ea4\u53c9\u7f16\u8bd1\u3002","title":"\u524d\u7f6e\u68c0\u67e5"},{"location":"getting-started/install/node/#_3","text":"mkdir /opt/loggie && curl https://github.com/loggie-io/installation/releases/download/v1.2.0/loggie-linux-amd64 -o /opt/loggie/loggie && chmod +x /opt/loggie/loggie","title":"\u4e0b\u8f7d\u4e8c\u8fdb\u5236"},{"location":"getting-started/install/node/#_4","text":"\u8bf7\u6839\u636e\u5b9e\u9645\u9700\u6c42\u521b\u5efa\u914d\u7f6e\uff0c\u4ee5\u4e0b\u4e3a\u53c2\u8003\uff1a","title":"\u6dfb\u52a0\u914d\u7f6e\u6587\u4ef6"},{"location":"getting-started/install/node/#loggieyml","text":"loggie.yml cat << EOF > /opt/loggie/loggie.yml loggie : monitor : logger : period : 30s enabled : true listeners : filesource : ~ filewatcher : ~ reload : ~ sink : ~ reload : enabled : true period : 10s http : enabled : true port : 9196 EOF","title":"\u521b\u5efaloggie.yml"},{"location":"getting-started/install/node/#pipelinesyml","text":"pipelines.yml cat << EOF > /opt/loggie/pipelines.yml pipelines : - name : local sources : - type : file name : demo paths : - /tmp/log/*.log sink : type : dev printEvents : true codec : pretty : true EOF","title":"\u521b\u5efapipelines.yml"},{"location":"getting-started/install/node/#systemd","text":"cat << EOF > /lib/systemd/system/loggie.service [Unit] Description=Loggie Documentation=https://loggie-io.github.io/docs/getting-started/install/node/ [Service] MemoryMax=200M ExecStart=/opt/loggie/loggie -config.system=/opt/loggie/loggie.yml -config.pipeline=/opt/loggie/pipelines.yml Restart=always [Install] WantedBy=multi-user.target EOF","title":"\u6dfb\u52a0systemd\u914d\u7f6e"},{"location":"getting-started/install/node/#_5","text":"\u9996\u5148\u751f\u6548\u914d\u7f6e\uff1a systemctl daemon-reload \u7136\u540e\u8bbe\u7f6e\u4e3a\u5f00\u673a\u542f\u52a8\uff1a systemctl enable loggie \u63a5\u7740\u5c31\u53ef\u4ee5\u6b63\u5f0f\u542f\u52a8Loggie\u4e86\uff1a systemctl start loggie \u542f\u52a8\u540e\uff0c\u4f60\u53ef\u4ee5\u968f\u65f6\u67e5\u770b\u8fdb\u7a0b\u72b6\u6001\uff1a systemctl status loggie","title":"\u542f\u52a8"},{"location":"getting-started/intro/core-concept/","text":"\u6838\u5fc3\u6982\u5ff5 \u00b6 Loggie\u662f\u4e00\u4e2a\u57fa\u4e8eGolang\u7684\u8f7b\u91cf\u7ea7\u3001\u9ad8\u6027\u80fd\u3001\u4e91\u539f\u751f\u65e5\u5fd7\u91c7\u96c6Agent\u548c\u4e2d\u8f6c\u5904\u7406Aggregator\uff0c\u652f\u6301\u591aPipeline\u548c\u7ec4\u4ef6\u70ed\u63d2\u62d4\uff0c\u63d0\u4f9b\u4e86\uff1a \u4e00\u6808\u5f0f\u65e5\u5fd7\u89e3\u51b3\u65b9\u6848 \uff1a\u540c\u65f6\u652f\u6301\u65e5\u5fd7\u4e2d\u8f6c\u3001\u8fc7\u6ee4\u3001\u89e3\u6790\u3001\u5207\u5206\u3001\u65e5\u5fd7\u62a5\u8b66\u7b49 \u4e91\u539f\u751f\u7684\u65e5\u5fd7\u5f62\u6001 \uff1a\u5feb\u901f\u4fbf\u6377\u7684\u5bb9\u5668\u65e5\u5fd7\u91c7\u96c6\u65b9\u5f0f\uff0c\u539f\u751f\u7684Kubernetes\u52a8\u6001\u914d\u7f6e\u4e0b\u53d1 \u751f\u4ea7\u7ea7\u7684\u7279\u6027 \uff1aLoggie\u5438\u6536\u4e86\u6211\u4eec\u957f\u671f\u7684\u5927\u89c4\u6a21\u8fd0\u7ef4\u7ecf\u9a8c\uff0c\u5f62\u6210\u4e86\u5168\u65b9\u4f4d\u7684\u53ef\u89c2\u6d4b\u6027\u3001\u5feb\u901f\u6392\u969c\u3001\u5f02\u5e38\u9884\u8b66\u3001\u81ea\u52a8\u5316\u8fd0\u7ef4\u80fd\u529b \u67b6\u6784 \u00b6 \u6982\u5ff5 \u00b6 \u6838\u5fc3\u6570\u636e\u6d41 \u00b6 Source \uff1a\u8f93\u5165\u6e90\uff0c\u8868\u793a\u4e00\u4e2a\u5177\u4f53\u7684\u8f93\u5165\u6e90\uff0c\u4e00\u4e2aPipeline\u53ef\u4ee5\u6709\u591a\u4e2a\u4e0d\u540c\u7684\u8f93\u5165\u6e90\u3002\u6bd4\u5982file source\u8868\u793a\u65e5\u5fd7\u6587\u4ef6\u91c7\u96c6\u6e90\uff0cKafka source\u4e3a\u8bfb\u53d6Kafka\u7684\u8f93\u5165\u6e90\u3002 Sink \uff1a\u8f93\u51fa\u6e90\uff0c\u8868\u793a\u4e00\u4e2a\u5177\u4f53\u7684\u8f93\u51fa\u6e90\uff0c\u4e00\u4e2aPipeline\u4ec5\u80fd\u914d\u7f6e\u4e00\u79cd\u7c7b\u578b\u7684\u8f93\u5165\u6e90\uff0c\u4f46\u662f\u53ef\u4ee5\u6709\u591a\u4e2a\u5e76\u884c\u5b9e\u4f8b\u3002\u6bd4\u5982Elasticsearch sink\u8868\u793a\u65e5\u5fd7\u6570\u636e\u5c06\u53d1\u9001\u81f3\u8fdc\u7aef\u7684Elasticsearch\u3002 Interceptor \uff1a\u62e6\u622a\u5668\uff0c\u8868\u793a\u4e00\u4e2a\u65e5\u5fd7\u6570\u636e\u5904\u7406\u7ec4\u4ef6\uff0c\u4e0d\u540c\u7684\u62e6\u622a\u5668\u6839\u636e\u5b9e\u73b0\u53ef\u4ee5\u8fdb\u884c\u65e5\u5fd7\u7684\u89e3\u6790\u3001\u5207\u5206\u3001\u8f6c\u6362\u3001\u9650\u6d41\u7b49\u3002\u4e00\u4e2aPipeline\u53ef\u4ee5\u6709\u591a\u4e2aInterceptor\uff0c\u6570\u636e\u6d41\u7ecf\u8fc7\u591a\u4e2aInterceptor\u88ab\u94fe\u5f0f\u5904\u7406\u3002 Queue \uff1a\u961f\u5217\uff0c\u76ee\u524d\u6709\u5185\u5b58\u961f\u5217\u3002 Pipeline \uff1a\u7ba1\u9053\uff0csource/interceptor/queue/sink\u5171\u540c\u7ec4\u6210\u4e86\u4e00\u4e2aPipeline\uff0c\u4e0d\u540c\u7684Pipeline\u6570\u636e\u9694\u79bb\u3002 \u7ba1\u7406\u4e0e\u63a7\u5236 \u00b6 Discovery \uff1a\u52a8\u6001\u914d\u7f6e\u7684\u4e0b\u53d1\uff0c\u76ee\u524d\u4e3b\u8981\u4e3aKubernetes\u4e0b\u7684\u65e5\u5fd7\u914d\u7f6e\uff0c\u53ef\u4ee5\u901a\u8fc7\u521b\u5efaLogConfig\u7b49CRD\u5b9e\u4f8b\u7684\u65b9\u5f0f\u6765\u91c7\u96c6\u5bb9\u5668\u65e5\u5fd7\u3002\u540e\u7eed\u5c06\u9646\u7eed\u652f\u6301\u4e3b\u673a\u5f62\u6001\u4e0b\u7684\u5404\u79cd\u914d\u7f6e\u4e2d\u5fc3\u5bf9\u63a5\u3002 Monitor EventBus \uff1a\u5404\u7ec4\u4ef6\u5747\u53ef\u4ee5\u901a\u8fc7publish\u6570\u636e\u5230EventBus Topic\u4e2d\uff0c\u7531\u7279\u5b9a\u7684Listener\u76d1\u542cTopic\u5e76\u8fdb\u884c\u6d88\u8d39\u5904\u7406\u3002\u4e3b\u8981\u7528\u4e8e\u76d1\u63a7\u6570\u636e\u7684\u66b4\u9732\u6216\u53d1\u9001\u3002 Reloader \uff1a\u7528\u4e8e\u914d\u7f6e\u7684\u52a8\u6001\u66f4\u65b0\u3002","title":"\u6838\u5fc3\u6982\u5ff5"},{"location":"getting-started/intro/core-concept/#_1","text":"Loggie\u662f\u4e00\u4e2a\u57fa\u4e8eGolang\u7684\u8f7b\u91cf\u7ea7\u3001\u9ad8\u6027\u80fd\u3001\u4e91\u539f\u751f\u65e5\u5fd7\u91c7\u96c6Agent\u548c\u4e2d\u8f6c\u5904\u7406Aggregator\uff0c\u652f\u6301\u591aPipeline\u548c\u7ec4\u4ef6\u70ed\u63d2\u62d4\uff0c\u63d0\u4f9b\u4e86\uff1a \u4e00\u6808\u5f0f\u65e5\u5fd7\u89e3\u51b3\u65b9\u6848 \uff1a\u540c\u65f6\u652f\u6301\u65e5\u5fd7\u4e2d\u8f6c\u3001\u8fc7\u6ee4\u3001\u89e3\u6790\u3001\u5207\u5206\u3001\u65e5\u5fd7\u62a5\u8b66\u7b49 \u4e91\u539f\u751f\u7684\u65e5\u5fd7\u5f62\u6001 \uff1a\u5feb\u901f\u4fbf\u6377\u7684\u5bb9\u5668\u65e5\u5fd7\u91c7\u96c6\u65b9\u5f0f\uff0c\u539f\u751f\u7684Kubernetes\u52a8\u6001\u914d\u7f6e\u4e0b\u53d1 \u751f\u4ea7\u7ea7\u7684\u7279\u6027 \uff1aLoggie\u5438\u6536\u4e86\u6211\u4eec\u957f\u671f\u7684\u5927\u89c4\u6a21\u8fd0\u7ef4\u7ecf\u9a8c\uff0c\u5f62\u6210\u4e86\u5168\u65b9\u4f4d\u7684\u53ef\u89c2\u6d4b\u6027\u3001\u5feb\u901f\u6392\u969c\u3001\u5f02\u5e38\u9884\u8b66\u3001\u81ea\u52a8\u5316\u8fd0\u7ef4\u80fd\u529b","title":"\u6838\u5fc3\u6982\u5ff5"},{"location":"getting-started/intro/core-concept/#_2","text":"","title":"\u67b6\u6784"},{"location":"getting-started/intro/core-concept/#_3","text":"","title":"\u6982\u5ff5"},{"location":"getting-started/intro/core-concept/#_4","text":"Source \uff1a\u8f93\u5165\u6e90\uff0c\u8868\u793a\u4e00\u4e2a\u5177\u4f53\u7684\u8f93\u5165\u6e90\uff0c\u4e00\u4e2aPipeline\u53ef\u4ee5\u6709\u591a\u4e2a\u4e0d\u540c\u7684\u8f93\u5165\u6e90\u3002\u6bd4\u5982file source\u8868\u793a\u65e5\u5fd7\u6587\u4ef6\u91c7\u96c6\u6e90\uff0cKafka source\u4e3a\u8bfb\u53d6Kafka\u7684\u8f93\u5165\u6e90\u3002 Sink \uff1a\u8f93\u51fa\u6e90\uff0c\u8868\u793a\u4e00\u4e2a\u5177\u4f53\u7684\u8f93\u51fa\u6e90\uff0c\u4e00\u4e2aPipeline\u4ec5\u80fd\u914d\u7f6e\u4e00\u79cd\u7c7b\u578b\u7684\u8f93\u5165\u6e90\uff0c\u4f46\u662f\u53ef\u4ee5\u6709\u591a\u4e2a\u5e76\u884c\u5b9e\u4f8b\u3002\u6bd4\u5982Elasticsearch sink\u8868\u793a\u65e5\u5fd7\u6570\u636e\u5c06\u53d1\u9001\u81f3\u8fdc\u7aef\u7684Elasticsearch\u3002 Interceptor \uff1a\u62e6\u622a\u5668\uff0c\u8868\u793a\u4e00\u4e2a\u65e5\u5fd7\u6570\u636e\u5904\u7406\u7ec4\u4ef6\uff0c\u4e0d\u540c\u7684\u62e6\u622a\u5668\u6839\u636e\u5b9e\u73b0\u53ef\u4ee5\u8fdb\u884c\u65e5\u5fd7\u7684\u89e3\u6790\u3001\u5207\u5206\u3001\u8f6c\u6362\u3001\u9650\u6d41\u7b49\u3002\u4e00\u4e2aPipeline\u53ef\u4ee5\u6709\u591a\u4e2aInterceptor\uff0c\u6570\u636e\u6d41\u7ecf\u8fc7\u591a\u4e2aInterceptor\u88ab\u94fe\u5f0f\u5904\u7406\u3002 Queue \uff1a\u961f\u5217\uff0c\u76ee\u524d\u6709\u5185\u5b58\u961f\u5217\u3002 Pipeline \uff1a\u7ba1\u9053\uff0csource/interceptor/queue/sink\u5171\u540c\u7ec4\u6210\u4e86\u4e00\u4e2aPipeline\uff0c\u4e0d\u540c\u7684Pipeline\u6570\u636e\u9694\u79bb\u3002","title":"\u6838\u5fc3\u6570\u636e\u6d41"},{"location":"getting-started/intro/core-concept/#_5","text":"Discovery \uff1a\u52a8\u6001\u914d\u7f6e\u7684\u4e0b\u53d1\uff0c\u76ee\u524d\u4e3b\u8981\u4e3aKubernetes\u4e0b\u7684\u65e5\u5fd7\u914d\u7f6e\uff0c\u53ef\u4ee5\u901a\u8fc7\u521b\u5efaLogConfig\u7b49CRD\u5b9e\u4f8b\u7684\u65b9\u5f0f\u6765\u91c7\u96c6\u5bb9\u5668\u65e5\u5fd7\u3002\u540e\u7eed\u5c06\u9646\u7eed\u652f\u6301\u4e3b\u673a\u5f62\u6001\u4e0b\u7684\u5404\u79cd\u914d\u7f6e\u4e2d\u5fc3\u5bf9\u63a5\u3002 Monitor EventBus \uff1a\u5404\u7ec4\u4ef6\u5747\u53ef\u4ee5\u901a\u8fc7publish\u6570\u636e\u5230EventBus Topic\u4e2d\uff0c\u7531\u7279\u5b9a\u7684Listener\u76d1\u542cTopic\u5e76\u8fdb\u884c\u6d88\u8d39\u5904\u7406\u3002\u4e3b\u8981\u7528\u4e8e\u76d1\u63a7\u6570\u636e\u7684\u66b4\u9732\u6216\u53d1\u9001\u3002 Reloader \uff1a\u7528\u4e8e\u914d\u7f6e\u7684\u52a8\u6001\u66f4\u65b0\u3002","title":"\u7ba1\u7406\u4e0e\u63a7\u5236"},{"location":"getting-started/quick-start/kubernetes/","text":"\u5feb\u901f\u4e0a\u624b\uff1a\u91c7\u96c6Kubernetes Pod\u65e5\u5fd7 \u00b6 \u4e0b\u9762\u5c06\u5e26\u4f60\u6f14\u793a\u5728\u4e00\u4e2aKubernetes\u96c6\u7fa4\u4e2d\uff0c\u901a\u8fc7\u521b\u5efaLogConfig CRD\u5feb\u901f\u91c7\u96c6Pod\u7684\u65e5\u5fd7\u3002 1. \u51c6\u5907Kubernetes\u73af\u5883 \u00b6 \u53ef\u4ee5\u4f7f\u7528\u73b0\u6709Kubernetes\u96c6\u7fa4\uff0c\u6216\u8005 \u90e8\u7f72Kubernetes \u3002\u672c\u5730\u63a8\u8350\u4f7f\u7528 Kind \u642d\u5efaKubernetes\u96c6\u7fa4\u3002 \u672c\u6587\u7684\u64cd\u4f5c\u9700\u8981\u5728\u672c\u5730\u4f7f\u7528: kubectl\uff08 \u4e0b\u8f7d \uff09 helm\uff08 \u4e0b\u8f7d \uff09 \u8bf7\u786e\u4fdd\u672c\u5730\u6709kubectl\u548chelm\u53ef\u6267\u884c\u547d\u4ee4\u3002 2. \u90e8\u7f72Loggie DaemonSet \u00b6 \u4f60\u53ef\u4ee5\u5728 installation \u9875\u9762\u67e5\u770b\u6240\u6709\u53d1\u5e03\u7684\u90e8\u7f72chart\u3002 \u53ef\u4ee5\u9009\u62e9\uff1a \u4e0b\u8f7dchart\u518d\u90e8\u7f72 \u00b6 helm pull https://github.com/loggie-io/installation/releases/download/v1.2.0/loggie-v1.2.0.tgz && tar xvzf loggie-v1.2.0.tgz \u5c1d\u8bd5\u4fee\u6539\u4e00\u4e0b\u5176\u4e2d\u7684values.yaml\u3002 \u60f3\u4f7f\u7528\u5176\u4ed6\u7248\u672c\u955c\u50cf\uff1f \u4e3a\u4e86\u65b9\u4fbf\u4f53\u9a8c\u6700\u65b0\u7684Fix\u548c\u7279\u6027\uff0c\u6211\u4eec\u63d0\u4f9b\u4e86main\u5206\u652f\u6bcf\u6b21\u5408\u5e76\u540e\u7684\u955c\u50cf\u7248\u672c\uff0c\u53ef\u901a\u8fc7 \u8fd9\u91cc \u8fdb\u884c\u9009\u62e9\u3002 \u7136\u540e\u90e8\u7f72\u5b89\u88c5\uff1a helm install loggie ./loggie -nloggie --create-namespace \u5f53\u7136\u4f60\u4e5f\u53ef\u4ee5\uff1a \u76f4\u63a5\u90e8\u7f72\uff1a \u00b6 helm install loggie -nloggie --create-namespace https://github.com/loggie-io/installation/releases/download/v1.2.0/loggie-v1.2.0.tgz \u90e8\u7f72\u6709\u95ee\u9898\uff1f \u5982\u679c\u5c1d\u8bd5\u90e8\u7f72\u540e\u51fa\u73b0\u95ee\u9898\uff0c\u6216\u8005\u5728\u4f60\u7684\u73af\u5883\u4e2d\u4ee5\u4e0b\u6f14\u793a\u64cd\u4f5c\u672a\u6210\u529f\uff0c\u8bf7\u53c2\u8003 Kubernetes\u4e0b\u90e8\u7f72Loggie \uff0c\u4fee\u6539\u76f8\u5173\u914d\u7f6e\u3002 3. \u91c7\u96c6\u65e5\u5fd7 \u00b6 Loggie\u5b9a\u4e49\u4e86Kubernetes CRD LogConfig\uff0c\u4e00\u4e2aLogConfig\u8868\u793a\u91c7\u96c6\u4e00\u7c7bPods\u7684\u65e5\u5fd7\u91c7\u96c6\u4efb\u52a1\u3002 3.1 \u521b\u5efa\u88ab\u91c7\u96c6\u7684Pods \u00b6 \u6211\u4eec\u5148\u521b\u5efa\u4e00\u4e2aPod\u7528\u4e8e\u88ab\u91c7\u96c6\u65e5\u5fd7\u7684\u5bf9\u8c61\u3002 kubectl create deploy nginx --image = nginx \u63a5\u4e0b\u6765\u5c06\u91c7\u96c6\u8fd9\u4e2aNginx Pod\u7684\u6807\u51c6\u8f93\u51fastdout\u65e5\u5fd7\u3002 3.2 \u5b9a\u4e49\u8f93\u51fa\u6e90Sink \u00b6 \u63a5\u7740\uff0c\u6211\u4eec\u521b\u5efa\u4e00\u4e2aLoggie\u5b9a\u4e49\u7684CRD Sink\u5b9e\u4f8b\uff0c\u8868\u660e\u65e5\u5fd7\u53d1\u9001\u7684\u540e\u7aef\u3002 \u4e3a\u4e86\u65b9\u4fbf\u6f14\u793a\uff0c\u8fd9\u91cc\u6211\u4eec\u5c06\u65e5\u5fd7\u53d1\u9001\u81f3Loggie Agent\u81ea\u8eab\u7684\u65e5\u5fd7\u4e2d\u5e76\u6253\u5370\u3002 cat << EOF | kubectl apply -f - apiVersion : loggie.io/v1beta1 kind : Sink metadata : name : default spec : sink : | type: dev printEvents: true EOF \u53ef\u4ee5\u901a\u8fc7 kubectl get sink \u67e5\u770b\u5230\u5df2\u521b\u5efa\u7684Sink\u3002 3.3 \u5b9a\u4e49\u91c7\u96c6\u4efb\u52a1 \u00b6 Loggie\u5b9a\u4e49CRD LogConfig\uff0c\u8868\u793a\u4e00\u4e2a\u65e5\u5fd7\u91c7\u96c6\u4efb\u52a1\u3002\u6211\u4eec\u521b\u5efa\u4e00\u4e2aLogConfig\u793a\u4f8b\u5982\u4e0b\u6240\u793a\uff1a cat << EOF | kubectl apply -f - apiVersion : loggie.io/v1beta1 kind : LogConfig metadata : name : nginx namespace : default spec : selector : type : pod labelSelector : app : nginx pipeline : sources : | - type: file name: mylog paths: - stdout sinkRef : default EOF \u53ef\u4ee5\u770b\u5230\uff0c\u4e0a\u9762\u4f7f\u7528\u4e86sinkRef\u5f15\u7528\u4e86\u521a\u624d\u521b\u5efa\u7684 sink default CR \u3002\u5f53\u7136\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u76f4\u63a5\u5728Logconfig\u4e2d\u4f7f\u7528sink\u5b57\u6bb5\uff0c\u793a\u4f8b\u5982\u4e0b\uff1a cat << EOF | kubectl apply -f - apiVersion : loggie.io/v1beta1 kind : LogConfig metadata : name : nginx namespace : default spec : selector : type : pod labelSelector : app : nginx pipeline : sources : | - type: file name: mylog paths: - stdout sink : | type: dev printEvents: true codec: type: json pretty: true EOF \u521b\u5efa\u5b8c\u4e4b\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 kubectl get lgc \u67e5\u770b\u5230\u521b\u5efa\u7684CRD\u5b9e\u4f8b\u3002 \u540c\u65f6\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u901a\u8fc7 kubectl describe lgc nginx \u67e5\u770bLogConfig\u7684\u4e8b\u4ef6\uff0c\u4ee5\u83b7\u53d6\u6700\u65b0\u7684\u72b6\u6001\u3002 Events: Type Reason Age From Message ---- ------ ---- ---- ------- Normal syncSuccess 52s loggie/kind-control-plane Sync type pod [nginx-6799fc88d8-5cb67] success \u4e0a\u9762\u7684nginx LogConfig\u901a\u8fc7\u5176\u4e2d\u7684spec.selector\u6765\u5339\u914d\u91c7\u96c6\u54ea\u4e9bPod\u7684\u65e5\u5fd7\uff0c\u8fd9\u91cc\u6211\u4eec\u4f7f\u7528 app: nginx \u9009\u62e9\u4e86\u521a\u624d\u521b\u5efa\u7684nginx Pod\u3002 spec.pipeline\u5219\u8868\u793aLoggie\u7684Pipeline\u914d\u7f6e\uff0c\u6211\u4eec\u53ea\u91c7\u96c6\u5bb9\u5668\u6807\u51c6\u8f93\u51fa\u7684\u65e5\u5fd7\uff0c\u6240\u4ee5\u5728paths\u4e2d\u586b\u5199 stdout \u5373\u53ef\u3002 4. \u67e5\u770b\u65e5\u5fd7 \u00b6 \u9996\u5148\u627e\u5230\u6240\u5728\u7684nginx pod\u8282\u70b9\uff1a kubectl get po -owide -l app = nginx \u7136\u540e\u6211\u4eec\u627e\u5230\u8be5\u8282\u70b9\u7684Loggie\uff1a kubectl -nloggie get po -owide | grep ${ node } \u53ef\u4ee5\u901a\u8fc7\uff1a kubectl -nloggie logs -f ${ logge -pod } \u67e5\u770bLoggie\u6253\u5370\u51fa\u7684\u65e5\u5fd7\uff0c\u91cc\u9762\u5c55\u793a\u4e86\u91c7\u96c6\u5230\u7684nginx\u6807\u51c6\u8f93\u51fa\u65e5\u5fd7\u3002 \u66f4\u591a \u00b6 \u4e0a\u6587\u53ea\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u5feb\u901f\u6f14\u793a\uff0c\u90e8\u7f72\u51fa\u73b0\u95ee\u9898\u6216\u8005\u60f3\u4e86\u89e3\u66f4\u591aKubernetes\u4e0bLoggie\u5982\u4f55\u4f7f\u7528\uff1f \u66f4\u5168\u9762\u7684\u90e8\u7f72\u4ecb\u7ecd\uff1a Kubernetes\u4e0b\u90e8\u7f72Loggie Kubernetes\u4e0b\u65e5\u5fd7\u91c7\u96c6\u6700\u4f73\u5b9e\u8df5\uff1a Kubernetes\u4e0b\u7684\u65e5\u5fd7\u91c7\u96c6","title":"\u5feb\u901f\u4e0a\u624b\uff1a\u91c7\u96c6Kubernetes Pod\u65e5\u5fd7"},{"location":"getting-started/quick-start/kubernetes/#kubernetes-pod","text":"\u4e0b\u9762\u5c06\u5e26\u4f60\u6f14\u793a\u5728\u4e00\u4e2aKubernetes\u96c6\u7fa4\u4e2d\uff0c\u901a\u8fc7\u521b\u5efaLogConfig CRD\u5feb\u901f\u91c7\u96c6Pod\u7684\u65e5\u5fd7\u3002","title":"\u5feb\u901f\u4e0a\u624b\uff1a\u91c7\u96c6Kubernetes Pod\u65e5\u5fd7"},{"location":"getting-started/quick-start/kubernetes/#1-kubernetes","text":"\u53ef\u4ee5\u4f7f\u7528\u73b0\u6709Kubernetes\u96c6\u7fa4\uff0c\u6216\u8005 \u90e8\u7f72Kubernetes \u3002\u672c\u5730\u63a8\u8350\u4f7f\u7528 Kind \u642d\u5efaKubernetes\u96c6\u7fa4\u3002 \u672c\u6587\u7684\u64cd\u4f5c\u9700\u8981\u5728\u672c\u5730\u4f7f\u7528: kubectl\uff08 \u4e0b\u8f7d \uff09 helm\uff08 \u4e0b\u8f7d \uff09 \u8bf7\u786e\u4fdd\u672c\u5730\u6709kubectl\u548chelm\u53ef\u6267\u884c\u547d\u4ee4\u3002","title":"1. \u51c6\u5907Kubernetes\u73af\u5883"},{"location":"getting-started/quick-start/kubernetes/#2-loggie-daemonset","text":"\u4f60\u53ef\u4ee5\u5728 installation \u9875\u9762\u67e5\u770b\u6240\u6709\u53d1\u5e03\u7684\u90e8\u7f72chart\u3002 \u53ef\u4ee5\u9009\u62e9\uff1a","title":"2. \u90e8\u7f72Loggie DaemonSet"},{"location":"getting-started/quick-start/kubernetes/#chart","text":"helm pull https://github.com/loggie-io/installation/releases/download/v1.2.0/loggie-v1.2.0.tgz && tar xvzf loggie-v1.2.0.tgz \u5c1d\u8bd5\u4fee\u6539\u4e00\u4e0b\u5176\u4e2d\u7684values.yaml\u3002 \u60f3\u4f7f\u7528\u5176\u4ed6\u7248\u672c\u955c\u50cf\uff1f \u4e3a\u4e86\u65b9\u4fbf\u4f53\u9a8c\u6700\u65b0\u7684Fix\u548c\u7279\u6027\uff0c\u6211\u4eec\u63d0\u4f9b\u4e86main\u5206\u652f\u6bcf\u6b21\u5408\u5e76\u540e\u7684\u955c\u50cf\u7248\u672c\uff0c\u53ef\u901a\u8fc7 \u8fd9\u91cc \u8fdb\u884c\u9009\u62e9\u3002 \u7136\u540e\u90e8\u7f72\u5b89\u88c5\uff1a helm install loggie ./loggie -nloggie --create-namespace \u5f53\u7136\u4f60\u4e5f\u53ef\u4ee5\uff1a","title":"\u4e0b\u8f7dchart\u518d\u90e8\u7f72"},{"location":"getting-started/quick-start/kubernetes/#_1","text":"helm install loggie -nloggie --create-namespace https://github.com/loggie-io/installation/releases/download/v1.2.0/loggie-v1.2.0.tgz \u90e8\u7f72\u6709\u95ee\u9898\uff1f \u5982\u679c\u5c1d\u8bd5\u90e8\u7f72\u540e\u51fa\u73b0\u95ee\u9898\uff0c\u6216\u8005\u5728\u4f60\u7684\u73af\u5883\u4e2d\u4ee5\u4e0b\u6f14\u793a\u64cd\u4f5c\u672a\u6210\u529f\uff0c\u8bf7\u53c2\u8003 Kubernetes\u4e0b\u90e8\u7f72Loggie \uff0c\u4fee\u6539\u76f8\u5173\u914d\u7f6e\u3002","title":"\u76f4\u63a5\u90e8\u7f72\uff1a"},{"location":"getting-started/quick-start/kubernetes/#3","text":"Loggie\u5b9a\u4e49\u4e86Kubernetes CRD LogConfig\uff0c\u4e00\u4e2aLogConfig\u8868\u793a\u91c7\u96c6\u4e00\u7c7bPods\u7684\u65e5\u5fd7\u91c7\u96c6\u4efb\u52a1\u3002","title":"3. \u91c7\u96c6\u65e5\u5fd7"},{"location":"getting-started/quick-start/kubernetes/#31-pods","text":"\u6211\u4eec\u5148\u521b\u5efa\u4e00\u4e2aPod\u7528\u4e8e\u88ab\u91c7\u96c6\u65e5\u5fd7\u7684\u5bf9\u8c61\u3002 kubectl create deploy nginx --image = nginx \u63a5\u4e0b\u6765\u5c06\u91c7\u96c6\u8fd9\u4e2aNginx Pod\u7684\u6807\u51c6\u8f93\u51fastdout\u65e5\u5fd7\u3002","title":"3.1 \u521b\u5efa\u88ab\u91c7\u96c6\u7684Pods"},{"location":"getting-started/quick-start/kubernetes/#32-sink","text":"\u63a5\u7740\uff0c\u6211\u4eec\u521b\u5efa\u4e00\u4e2aLoggie\u5b9a\u4e49\u7684CRD Sink\u5b9e\u4f8b\uff0c\u8868\u660e\u65e5\u5fd7\u53d1\u9001\u7684\u540e\u7aef\u3002 \u4e3a\u4e86\u65b9\u4fbf\u6f14\u793a\uff0c\u8fd9\u91cc\u6211\u4eec\u5c06\u65e5\u5fd7\u53d1\u9001\u81f3Loggie Agent\u81ea\u8eab\u7684\u65e5\u5fd7\u4e2d\u5e76\u6253\u5370\u3002 cat << EOF | kubectl apply -f - apiVersion : loggie.io/v1beta1 kind : Sink metadata : name : default spec : sink : | type: dev printEvents: true EOF \u53ef\u4ee5\u901a\u8fc7 kubectl get sink \u67e5\u770b\u5230\u5df2\u521b\u5efa\u7684Sink\u3002","title":"3.2 \u5b9a\u4e49\u8f93\u51fa\u6e90Sink"},{"location":"getting-started/quick-start/kubernetes/#33","text":"Loggie\u5b9a\u4e49CRD LogConfig\uff0c\u8868\u793a\u4e00\u4e2a\u65e5\u5fd7\u91c7\u96c6\u4efb\u52a1\u3002\u6211\u4eec\u521b\u5efa\u4e00\u4e2aLogConfig\u793a\u4f8b\u5982\u4e0b\u6240\u793a\uff1a cat << EOF | kubectl apply -f - apiVersion : loggie.io/v1beta1 kind : LogConfig metadata : name : nginx namespace : default spec : selector : type : pod labelSelector : app : nginx pipeline : sources : | - type: file name: mylog paths: - stdout sinkRef : default EOF \u53ef\u4ee5\u770b\u5230\uff0c\u4e0a\u9762\u4f7f\u7528\u4e86sinkRef\u5f15\u7528\u4e86\u521a\u624d\u521b\u5efa\u7684 sink default CR \u3002\u5f53\u7136\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u76f4\u63a5\u5728Logconfig\u4e2d\u4f7f\u7528sink\u5b57\u6bb5\uff0c\u793a\u4f8b\u5982\u4e0b\uff1a cat << EOF | kubectl apply -f - apiVersion : loggie.io/v1beta1 kind : LogConfig metadata : name : nginx namespace : default spec : selector : type : pod labelSelector : app : nginx pipeline : sources : | - type: file name: mylog paths: - stdout sink : | type: dev printEvents: true codec: type: json pretty: true EOF \u521b\u5efa\u5b8c\u4e4b\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 kubectl get lgc \u67e5\u770b\u5230\u521b\u5efa\u7684CRD\u5b9e\u4f8b\u3002 \u540c\u65f6\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u901a\u8fc7 kubectl describe lgc nginx \u67e5\u770bLogConfig\u7684\u4e8b\u4ef6\uff0c\u4ee5\u83b7\u53d6\u6700\u65b0\u7684\u72b6\u6001\u3002 Events: Type Reason Age From Message ---- ------ ---- ---- ------- Normal syncSuccess 52s loggie/kind-control-plane Sync type pod [nginx-6799fc88d8-5cb67] success \u4e0a\u9762\u7684nginx LogConfig\u901a\u8fc7\u5176\u4e2d\u7684spec.selector\u6765\u5339\u914d\u91c7\u96c6\u54ea\u4e9bPod\u7684\u65e5\u5fd7\uff0c\u8fd9\u91cc\u6211\u4eec\u4f7f\u7528 app: nginx \u9009\u62e9\u4e86\u521a\u624d\u521b\u5efa\u7684nginx Pod\u3002 spec.pipeline\u5219\u8868\u793aLoggie\u7684Pipeline\u914d\u7f6e\uff0c\u6211\u4eec\u53ea\u91c7\u96c6\u5bb9\u5668\u6807\u51c6\u8f93\u51fa\u7684\u65e5\u5fd7\uff0c\u6240\u4ee5\u5728paths\u4e2d\u586b\u5199 stdout \u5373\u53ef\u3002","title":"3.3 \u5b9a\u4e49\u91c7\u96c6\u4efb\u52a1"},{"location":"getting-started/quick-start/kubernetes/#4","text":"\u9996\u5148\u627e\u5230\u6240\u5728\u7684nginx pod\u8282\u70b9\uff1a kubectl get po -owide -l app = nginx \u7136\u540e\u6211\u4eec\u627e\u5230\u8be5\u8282\u70b9\u7684Loggie\uff1a kubectl -nloggie get po -owide | grep ${ node } \u53ef\u4ee5\u901a\u8fc7\uff1a kubectl -nloggie logs -f ${ logge -pod } \u67e5\u770bLoggie\u6253\u5370\u51fa\u7684\u65e5\u5fd7\uff0c\u91cc\u9762\u5c55\u793a\u4e86\u91c7\u96c6\u5230\u7684nginx\u6807\u51c6\u8f93\u51fa\u65e5\u5fd7\u3002","title":"4. \u67e5\u770b\u65e5\u5fd7"},{"location":"getting-started/quick-start/kubernetes/#_2","text":"\u4e0a\u6587\u53ea\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u5feb\u901f\u6f14\u793a\uff0c\u90e8\u7f72\u51fa\u73b0\u95ee\u9898\u6216\u8005\u60f3\u4e86\u89e3\u66f4\u591aKubernetes\u4e0bLoggie\u5982\u4f55\u4f7f\u7528\uff1f \u66f4\u5168\u9762\u7684\u90e8\u7f72\u4ecb\u7ecd\uff1a Kubernetes\u4e0b\u90e8\u7f72Loggie Kubernetes\u4e0b\u65e5\u5fd7\u91c7\u96c6\u6700\u4f73\u5b9e\u8df5\uff1a Kubernetes\u4e0b\u7684\u65e5\u5fd7\u91c7\u96c6","title":"\u66f4\u591a"},{"location":"getting-started/quick-start/node/","text":"\u5feb\u901f\u4e0a\u624b\uff1a\u8282\u70b9\u65e5\u5fd7\u91c7\u96c6 \u00b6 \u4e0b\u9762\u6211\u4eec\u5c06\u6f14\u793a\u4e00\u4e2a\u6700\u7b80\u5355\u7684\u91c7\u96c6\u8282\u70b9\u65e5\u5fd7\u6587\u4ef6\u7684\u573a\u666f\u3002 1. \u4e0b\u8f7d\u53ef\u6267\u884c\u6587\u4ef6 \u00b6 \u8bf7\u627e\u4e00\u53f0Linux\u670d\u52a1\u5668\u8282\u70b9\uff0c\u4e0b\u8f7dLoggie\u4e8c\u8fdb\u5236\u53ef\u6267\u884c\u6587\u4ef6 curl -LJ https://github.com/loggie-io/installation/releases/download/v1.2.0/loggie-linux-amd64 -o loggie 2. \u6dfb\u52a0\u914d\u7f6e\u6587\u4ef6 \u00b6 \u6211\u4eec\u5148\u4f7f\u7528dev sink\u5c06file source\u91c7\u96c6\u7684\u65e5\u5fd7\u6587\u4ef6\u6253\u5370\u5230\u6807\u51c6\u8f93\u51fa\uff0c\u590d\u5236\u4ee5\u4e0b\u5185\u5bb9\u4e3apipelines.yml\u6587\u4ef6\uff1a pipelines.yml cat << EOF > pipelines.yml pipelines : - name : demo sources : - type : file name : mylog paths : - \"/var/log/*.log\" sink : type : dev printEvents : true EOF \u8fd9\u91cc\u6211\u4eec\u521b\u5efa\u4e86\u4e00\u4e2a\u540d\u79f0\u4e3ademo\u7684pipeline\uff0c\u7136\u540e\u5b9a\u4e49\u4e86\u4e00\u4e2a\u7c7b\u578b\u4e3afile\u7684source\u8f93\u5165\u6e90\u7ec4\u4ef6\uff0c\u8868\u793a\u9700\u8981\u91c7\u96c6\u5728 /var/log \u76ee\u5f55\u4e0b\u6ee1\u8db3 *.log \u5339\u914d\u89c4\u5219\u7684\u65e5\u5fd7\u6587\u4ef6\u3002\u6587\u4ef6\u91c7\u96c6\u540e\uff0c\u6587\u4ef6\u4f1a\u88ab\u53d1\u9001\u81f3dev sink\u8f93\u51fa\u6e90\uff0c\u8be5sink\u4ec5\u4ec5\u5c06\u91c7\u96c6\u7684\u6587\u4ef6\u6253\u5370\u5230\u6807\u51c6\u8f93\u51fa\u3002 pipeline\u6587\u4ef6\u8868\u793a\u6211\u4eec\u60f3\u8981\u7684\u8f93\u5165\u3001\u8f93\u51fa\u7b49\u4e1a\u52a1\u76f8\u5173\u7684\u914d\u7f6e\uff0c\u9664\u4e86pipeline\u914d\u7f6e\u6587\u4ef6\u5916\uff0cLoggie\u8fd8\u9700\u8981\u6709\u4e00\u4e2a\u5168\u5c40\u7684\u914d\u7f6e\u6587\u4ef6\u3002 // loggie.yml cat << EOF > loggie.yml loggie : reload : enabled : true period : 10s EOF \u8fd9\u91cc\u6211\u4eec\u53ea\u5c55\u793a\u4e86\u4e00\u4e2a\u6bd4\u8f83\u7b80\u5355\u7684\u914d\u7f6e\uff0c\u8868\u793a\u6253\u5f00loggie\u7684\u52a8\u6001\u914d\u7f6ereload\u529f\u80fd\uff0c\u540c\u65f6\u95f4\u9694\u68c0\u67e5\u65f6\u95f4\u4e3a10s\u3002 \u5728\u8282\u70b9\u4e0a\u589e\u52a0\u4ee5\u4e0a\u4e24\u4e2a\u914d\u7f6e\u6587\u4ef6\u540e\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5f00\u59cb\u542f\u52a8Loggie\u4e86\u3002 3. \u8fd0\u884c \u00b6 ./loggie -config.system = ./loggie.yml -config.pipeline = ./pipelines.yml -log.jsonFormat = false \u542f\u52a8\u53c2\u6570\u91cc\uff0c\u586b\u5165\u4e0a\u9762\u7684loggie.yml\u548cpipelines.yml\u7684\u6587\u4ef6\u8def\u5f84\u3002 \u770b\u5230\u6b63\u5e38\u7684\u542f\u52a8\u65e5\u5fd7\u540e\uff0c\u8868\u660eLoggie\u5c31\u5f00\u59cb\u6b63\u5e38\u7684\u5de5\u4f5c\u4e86\u3002\u540c\u65f6\u8282\u70b9/var/log/*.log\u4e0b\u7684\u65e5\u5fd7\u6587\u4ef6\uff0c\u90fd\u4f1a\u88ab\u6253\u5370\u5230\u6807\u51c6\u8f93\u51fa\u3002","title":"\u5feb\u901f\u4e0a\u624b\uff1a\u8282\u70b9\u65e5\u5fd7\u91c7\u96c6"},{"location":"getting-started/quick-start/node/#_1","text":"\u4e0b\u9762\u6211\u4eec\u5c06\u6f14\u793a\u4e00\u4e2a\u6700\u7b80\u5355\u7684\u91c7\u96c6\u8282\u70b9\u65e5\u5fd7\u6587\u4ef6\u7684\u573a\u666f\u3002","title":"\u5feb\u901f\u4e0a\u624b\uff1a\u8282\u70b9\u65e5\u5fd7\u91c7\u96c6"},{"location":"getting-started/quick-start/node/#1","text":"\u8bf7\u627e\u4e00\u53f0Linux\u670d\u52a1\u5668\u8282\u70b9\uff0c\u4e0b\u8f7dLoggie\u4e8c\u8fdb\u5236\u53ef\u6267\u884c\u6587\u4ef6 curl -LJ https://github.com/loggie-io/installation/releases/download/v1.2.0/loggie-linux-amd64 -o loggie","title":"1. \u4e0b\u8f7d\u53ef\u6267\u884c\u6587\u4ef6"},{"location":"getting-started/quick-start/node/#2","text":"\u6211\u4eec\u5148\u4f7f\u7528dev sink\u5c06file source\u91c7\u96c6\u7684\u65e5\u5fd7\u6587\u4ef6\u6253\u5370\u5230\u6807\u51c6\u8f93\u51fa\uff0c\u590d\u5236\u4ee5\u4e0b\u5185\u5bb9\u4e3apipelines.yml\u6587\u4ef6\uff1a pipelines.yml cat << EOF > pipelines.yml pipelines : - name : demo sources : - type : file name : mylog paths : - \"/var/log/*.log\" sink : type : dev printEvents : true EOF \u8fd9\u91cc\u6211\u4eec\u521b\u5efa\u4e86\u4e00\u4e2a\u540d\u79f0\u4e3ademo\u7684pipeline\uff0c\u7136\u540e\u5b9a\u4e49\u4e86\u4e00\u4e2a\u7c7b\u578b\u4e3afile\u7684source\u8f93\u5165\u6e90\u7ec4\u4ef6\uff0c\u8868\u793a\u9700\u8981\u91c7\u96c6\u5728 /var/log \u76ee\u5f55\u4e0b\u6ee1\u8db3 *.log \u5339\u914d\u89c4\u5219\u7684\u65e5\u5fd7\u6587\u4ef6\u3002\u6587\u4ef6\u91c7\u96c6\u540e\uff0c\u6587\u4ef6\u4f1a\u88ab\u53d1\u9001\u81f3dev sink\u8f93\u51fa\u6e90\uff0c\u8be5sink\u4ec5\u4ec5\u5c06\u91c7\u96c6\u7684\u6587\u4ef6\u6253\u5370\u5230\u6807\u51c6\u8f93\u51fa\u3002 pipeline\u6587\u4ef6\u8868\u793a\u6211\u4eec\u60f3\u8981\u7684\u8f93\u5165\u3001\u8f93\u51fa\u7b49\u4e1a\u52a1\u76f8\u5173\u7684\u914d\u7f6e\uff0c\u9664\u4e86pipeline\u914d\u7f6e\u6587\u4ef6\u5916\uff0cLoggie\u8fd8\u9700\u8981\u6709\u4e00\u4e2a\u5168\u5c40\u7684\u914d\u7f6e\u6587\u4ef6\u3002 // loggie.yml cat << EOF > loggie.yml loggie : reload : enabled : true period : 10s EOF \u8fd9\u91cc\u6211\u4eec\u53ea\u5c55\u793a\u4e86\u4e00\u4e2a\u6bd4\u8f83\u7b80\u5355\u7684\u914d\u7f6e\uff0c\u8868\u793a\u6253\u5f00loggie\u7684\u52a8\u6001\u914d\u7f6ereload\u529f\u80fd\uff0c\u540c\u65f6\u95f4\u9694\u68c0\u67e5\u65f6\u95f4\u4e3a10s\u3002 \u5728\u8282\u70b9\u4e0a\u589e\u52a0\u4ee5\u4e0a\u4e24\u4e2a\u914d\u7f6e\u6587\u4ef6\u540e\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5f00\u59cb\u542f\u52a8Loggie\u4e86\u3002","title":"2. \u6dfb\u52a0\u914d\u7f6e\u6587\u4ef6"},{"location":"getting-started/quick-start/node/#3","text":"./loggie -config.system = ./loggie.yml -config.pipeline = ./pipelines.yml -log.jsonFormat = false \u542f\u52a8\u53c2\u6570\u91cc\uff0c\u586b\u5165\u4e0a\u9762\u7684loggie.yml\u548cpipelines.yml\u7684\u6587\u4ef6\u8def\u5f84\u3002 \u770b\u5230\u6b63\u5e38\u7684\u542f\u52a8\u65e5\u5fd7\u540e\uff0c\u8868\u660eLoggie\u5c31\u5f00\u59cb\u6b63\u5e38\u7684\u5de5\u4f5c\u4e86\u3002\u540c\u65f6\u8282\u70b9/var/log/*.log\u4e0b\u7684\u65e5\u5fd7\u6587\u4ef6\uff0c\u90fd\u4f1a\u88ab\u6253\u5370\u5230\u6807\u51c6\u8f93\u51fa\u3002","title":"3. \u8fd0\u884c"},{"location":"getting-started/quick-start/quick-start/","text":"\u5feb\u901f\u4e0a\u624b \u00b6 Loggie\u662f\u4e00\u4e2a\u65e5\u5fd7\u91c7\u96c6Agent\u548c\u4e2d\u8f6c\u5904\u7406\u7684Aggregator\uff0c\u5305\u542b\u591a\u4e2aPipeline\u7ba1\u9053\uff0c\u6bcf\u4e2aPipeline\u53c8\u7531Source\u8f93\u5165\u3001Interceptor\u62e6\u622a\u5904\u7406\u548cSink\u8f93\u51fa\u7ec4\u6210\u3002 \u57fa\u4e8e\u8fd9\u79cd\u63d2\u4ef6\u5f0f\u8bbe\u8ba1\uff0cLoggie\u5e76\u4e0d\u5c40\u9650\u5728\u65e5\u5fd7\u91c7\u96c6\uff0c\u901a\u8fc7\u914d\u7f6e\u4e0d\u540c\u7684Source/Interceptor/Sink\uff0cLoggie\u53ef\u4ee5\u7ec4\u5408\u5b9e\u73b0\u5404\u79cd\u4e0d\u540c\u7684\u529f\u80fd\u3002 \u7b80\u5355\u8d77\u89c1\uff0c\u8fd9\u91cc\u6211\u4eec\u4ece\u91c7\u96c6\u65e5\u5fd7\u5f00\u59cb\u3002 \u9009\u62e9\u4f60\u7684\u90e8\u7f72\u73af\u5883 \uff1a Kubernetes \u00b6 \u4e3b\u673a \u00b6","title":"\u5feb\u901f\u4e0a\u624b"},{"location":"getting-started/quick-start/quick-start/#_1","text":"Loggie\u662f\u4e00\u4e2a\u65e5\u5fd7\u91c7\u96c6Agent\u548c\u4e2d\u8f6c\u5904\u7406\u7684Aggregator\uff0c\u5305\u542b\u591a\u4e2aPipeline\u7ba1\u9053\uff0c\u6bcf\u4e2aPipeline\u53c8\u7531Source\u8f93\u5165\u3001Interceptor\u62e6\u622a\u5904\u7406\u548cSink\u8f93\u51fa\u7ec4\u6210\u3002 \u57fa\u4e8e\u8fd9\u79cd\u63d2\u4ef6\u5f0f\u8bbe\u8ba1\uff0cLoggie\u5e76\u4e0d\u5c40\u9650\u5728\u65e5\u5fd7\u91c7\u96c6\uff0c\u901a\u8fc7\u914d\u7f6e\u4e0d\u540c\u7684Source/Interceptor/Sink\uff0cLoggie\u53ef\u4ee5\u7ec4\u5408\u5b9e\u73b0\u5404\u79cd\u4e0d\u540c\u7684\u529f\u80fd\u3002 \u7b80\u5355\u8d77\u89c1\uff0c\u8fd9\u91cc\u6211\u4eec\u4ece\u91c7\u96c6\u65e5\u5fd7\u5f00\u59cb\u3002 \u9009\u62e9\u4f60\u7684\u90e8\u7f72\u73af\u5883 \uff1a","title":"\u5feb\u901f\u4e0a\u624b"},{"location":"getting-started/quick-start/quick-start/#kubernetes","text":"","title":"  Kubernetes"},{"location":"getting-started/quick-start/quick-start/#_2","text":"","title":"  \u4e3b\u673a"},{"location":"getting-started/roadmap/roadmap-2022/","text":"2022 Loggie RoadMap \u00b6 \u66f4\u591a\u7ec4\u4ef6\u4e0e\u529f\u80fd\u6269\u5c55 \u00b6 \u6301\u4e45\u5316queue \u6d41\u5904\u7406\u80fd\u529b\uff1a\u805a\u5408\u3001\u8ba1\u7b97\u7b49\uff08\u7c7b\u4f3cpulsar\u7684funtion\uff0c\u6216\u8005\u7406\u89e3\u4e3a\u8f7b\u91cf\u7ea7flink\uff09 source: elasticsearch\u3001http sink: file, clickhouse, pulsar, influxdb\u7b49 WASM\u5f62\u6001\u652f\u6301\u81ea\u5b9a\u4e49\u65e5\u5fd7\u89e3\u6790\u5904\u7406 \u652f\u6301Knative/KEDA\u7b49Serverless\u5f62\u6001\u6269\u7f29\u5bb9\u6307\u6807\uff0c\u5b9e\u73b0\u4e2d\u8f6c\u673a\u89e3\u6790\u5904\u7406\u7684\u81ea\u52a8\u4f38\u7f29 \u670d\u52a1\u53d1\u73b0\u4e0e\u914d\u7f6e\u4e2d\u5fc3 \u00b6 \u4e3b\u673a\u6a21\u5f0f\u7684\u914d\u7f6e\u4e0b\u53d1\uff1a\u652f\u6301Consul, Apollo\u7b49 \u4e91\u539f\u751f\u4e0eKubernetes \u00b6 \u81ea\u52a8\u6ce8\u5165Loggie sidecar\u5f62\u6001\u652f\u6301 opentelemetry\u517c\u5bb9\u4e0e\u652f\u6301","title":"2022 Loggie RoadMap"},{"location":"getting-started/roadmap/roadmap-2022/#2022-loggie-roadmap","text":"","title":"2022 Loggie RoadMap"},{"location":"getting-started/roadmap/roadmap-2022/#_1","text":"\u6301\u4e45\u5316queue \u6d41\u5904\u7406\u80fd\u529b\uff1a\u805a\u5408\u3001\u8ba1\u7b97\u7b49\uff08\u7c7b\u4f3cpulsar\u7684funtion\uff0c\u6216\u8005\u7406\u89e3\u4e3a\u8f7b\u91cf\u7ea7flink\uff09 source: elasticsearch\u3001http sink: file, clickhouse, pulsar, influxdb\u7b49 WASM\u5f62\u6001\u652f\u6301\u81ea\u5b9a\u4e49\u65e5\u5fd7\u89e3\u6790\u5904\u7406 \u652f\u6301Knative/KEDA\u7b49Serverless\u5f62\u6001\u6269\u7f29\u5bb9\u6307\u6807\uff0c\u5b9e\u73b0\u4e2d\u8f6c\u673a\u89e3\u6790\u5904\u7406\u7684\u81ea\u52a8\u4f38\u7f29","title":"\u66f4\u591a\u7ec4\u4ef6\u4e0e\u529f\u80fd\u6269\u5c55"},{"location":"getting-started/roadmap/roadmap-2022/#_2","text":"\u4e3b\u673a\u6a21\u5f0f\u7684\u914d\u7f6e\u4e0b\u53d1\uff1a\u652f\u6301Consul, Apollo\u7b49","title":"\u670d\u52a1\u53d1\u73b0\u4e0e\u914d\u7f6e\u4e2d\u5fc3"},{"location":"getting-started/roadmap/roadmap-2022/#kubernetes","text":"\u81ea\u52a8\u6ce8\u5165Loggie sidecar\u5f62\u6001\u652f\u6301 opentelemetry\u517c\u5bb9\u4e0e\u652f\u6301","title":"\u4e91\u539f\u751f\u4e0eKubernetes"}]}